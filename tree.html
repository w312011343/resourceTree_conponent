<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>资源树</title>
	<style type="text/css">
		body{
			background: #f7f7f7;
		}
		.treeCont{
			padding-left: 20px;
		}
		.treeLevlCont{
			padding-left: 20px;
		}
		.titleContent{
			display: inline-block;
			vertical-align: middle;
		}
		.itemLevelSubTitle{
			display:inline-block;
		}
		.itemIcon{
			height: 16px;
			width: 16px;
			display: inline-block;
			cursor: pointer;
			box-sizing: border-box;
			vertical-align: middle;
			position: relative;
		}
		.itemLevelTitle{
			display: inline-block;
			height: 20px;
			line-height: 20px;
			vertical-align: middle;
		}
		.hide{
			display: none;
		}
		.itemShow{
			background: url('./icon/open.png') no-repeat;
			background-size: 100% 100%;
		}
		.itemHide{
			background: url('./icon/hide.png') no-repeat;
			background-size: 100% 100%;
		}
		.treeItem{
			position: relative;
		}
		.treeItem{
			margin-left: 10px;
		}
		.treeItem::after{
			content: '';
			position: absolute;
			top: 32px;
			left: 6px;
			width: 1px;
			height: calc(100% - 28px);
			border-left: 1px dashed red;
		}
		.treeItem .itemControl::before{
			content: '';
			position: absolute;
			top: 7px;
    		left: -22px;
			width: 20px;
			height:1px;
			border-top: 1px dashed red;
		}
		.treeItem[level_index="0"]>.itemTitle>.itemControl::before{
			border-top:none;
		}
		.treeItem:last-child::after{
			/* border-left: none; */
		}


	</style>
</head>
<body>
	<div class="tree">
		<div class="treeCont">
		</div>
	</div>
</body>
</html>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="tree.js"></script>
<script type="text/javascript">
	var $treeCont = $('.treeCont');
	var data = [
		{
			title:"系统管理",
			subTitle:'111',
			subImg:'./icon/open.png',
			datas:[
				{
					title:"机构管理",
					subTitle:'222',
					subImg:'',
					datas:[
						{
							title:"假数据1",
							subTitle:'3333',
							datas:[]
						},
						{
							title:"假数据1",
							subTitle:'4444',
							subImg:'./icon/hide.png',
							datas:[]
						}
					]
				},
				{
					title:"部门管理",
					subTitle:'555',
					datas:[]
				},
				{
					title:"员工管理",
					subTitle:'888',
					datas:[]
				}
			]
		},
		{
			title:"商品管理",
			datas:[
				{
					title:"机构管理",
					datas:[
						{
							title:"部分快捷",
							datas:[]
						},
						{
							title:"员工管理",
							datas:[]
						}
					]
				},
				{
					title:"部门管理1",
					datas:[]
				},
				{
					title:"员工管理1",
					datas:[]
				}
			]
		}
	]
	var tree = new Tree(data);
	tree.createTree($treeCont);
	$(document).off('click.itemIcon').on('click.itemIcon','.treeItem .itemIcon',function(e){
		var $target = $(e.currentTarget);
		var $treeLevlCont = $target.closest('.itemTitle').siblings('.treeLevlCont');
		// 展开收起
		if ($target.hasClass('itemControl')) {
			$target.hasClass('itemShow')?$treeLevlCont.removeClass('hide'):$treeLevlCont.addClass('hide')
			$target.toggleClass('itemShow').toggleClass('itemHide')
		}else{
			// 监听选中不选中
			if ($target.is(':checked')) {
				// 选中时候调用
			}else{
				// 不选中时候
			}
		}

	});
</script>